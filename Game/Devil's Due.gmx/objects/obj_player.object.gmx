<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_player_idle</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Properties and initializations

//Movement
dir = 0; //Initial direction
movespeed = 5.5; //Moving speed

//Combat
hp_max = 10; //max health
hp = 10; //initial health
hp_regen = 0.2; //hp regen per second
deagle_regen = 2; //deagle regen per second
possession_shield = 0; //possession shield
possession_charges = 1; //initial charges
possession_charges_max = 3; //max possession charges
possession_cd = 4.5; //possession cd
possession_bullet_speed = 9; //possession bullet speed
possession_bullet_range = 500; // possession bullet range
weapon_before_possession = 1; //weapon before possession
insanity = 0; //insanity init
fire_animation_sprite = spr_player_fire;
//Fire Booleans
can_fire_bullet = true; //Can fire boolean
can_fire_possession_bullet = true; //Can possess boolean

//Misc
currently_equipped_weapon = 1; //Default Equip
last_weapon = 0;
weapon_boolean = false;
splash_dir = 0;
show_splash = true;



  
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Collectibles
//Keys
purple_key = false;
green_key = false;
red_key = false;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///State Machine
state_machine_init();

//Define States
state_create("idle",scr_player_idle);
state_create("run",scr_player_run);
//Default State
state_init("idle");
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Weapons grid
weapons_total = 3;
//Weapons collumns
weapons_grid[0, 1] = "Name"; //name column
weapons_grid[0, 2] = "Ammo"; //ammo column
weapons_grid[0, 3] = "Available"; //collected column
weapons_grid[0, 4] = "Damage"; //damage column
weapons_grid[0, 5] = "Cooldown"; //weapon cooldown
weapons_grid[0, 6] = "Range"; //weapon range
weapons_grid[0, 7] = "Sound"; //weapon sound

//Names
weapons_grid[1,1] = "Devil Deagle";
weapons_grid[2,1] = "Devil Rifle";
weapons_grid[3,1] = "Machine Gun";
//Ammo
weapons_grid[1,2] = 99;
weapons_grid[2,2] = 0;
weapons_grid[3,2] = 0;
//Available
weapons_grid[1,3] = true;
weapons_grid[2,3] = false;
weapons_grid[3,3] = false;
//Damage
weapons_grid[1,4] = 1;
weapons_grid[2,4] = 1;
weapons_grid[3,4] = 1;
//Cooldown
weapons_grid[1,5] = 0.3;
weapons_grid[2,5] = 0.09;
weapons_grid[3,5] = 0.07;
//Range
weapons_grid[1,6] = 1000;
weapons_grid[2,6] = 1000;
weapons_grid[3,6] = 1000;
//Sound
weapons_grid[1,7] = snd_deagle_soul_02;
weapons_grid[2,7] = snd_rifle_auto;
weapons_grid[3,7] = snd_rifle_auto;
//Accuracy
weapons_grid[1,8] = 2;
weapons_grid[2,8] = 9;
weapons_grid[3,8] = 5;
//NoAmmo Sound
weapons_grid[1,9] = snd_deagle_noammo;
weapons_grid[2,9] = snd_rifle_noammo;
weapons_grid[3,9] = snd_machinegun_noammo;
//Bullet sprite
weapons_grid[1,10] = spr_deagle_bullet;
weapons_grid[2,10] = spr_rifle_bullet;
weapons_grid[3,10] = spr_machinegun_bullet;
//Max Ammo
weapons_grid[1,11] = 99;
//Muzzle Flash sprites
weapons_grid[1,12] = spr_flash_deagle;
weapons_grid[2,12] = spr_flash_deagle;
weapons_grid[3,12] = spr_flash_deagle;





</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Initialize other states and objects
instance_create(0,0,obj_player_fire) // firing substate
instance_create(0,0,obj_player_possess) // possession substate
instance_create(0,0,obj_gui) // gui object
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Sounds
//Hit Sounds Array
hit_sound[0] = snd_bullet_impact_01;
hit_sound[1] = snd_bullet_impact_01;
//Misc sounds
possession_sound = snd_possession_01;
//Footsteps array
tile_layers = 1;
footsteps_can_play = true;
footsteps_audio_cd = 0.5;
//Concrete
footsteps_array[0,0] = 1000000; 
footsteps_array[1,0] = snd_player_footstep_concrete_01;
footsteps_array[2,0] = snd_player_footstep_concrete_02;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Hit Sprites
hit_sprite[0] = spr_hit_blood_01;
hit_sprite[1] = spr_hit_blood_01;
hit_sprite[2] = spr_hit_blood_01;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Footsteps sound cooldown
footsteps_can_play = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Enable firing again once cd is over
can_fire_possession_bullet = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Enable firing again once cd is over
can_fire_bullet = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Update State
state_update();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//State Execute
state_execute();
//Always update audio listener
//Audio Listener
audio_listener_position(x,y,0);
audio_listener_orientation(0,0,1000,0,-1,0);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Weapons Wheel
//If you are at either end of the matrix, search until your currently equipped weapon, if not, search until the end

scr_player_getInput(); //get input

/*
if (scroll_up)
{
last_weapon = currently_equipped_weapon;
var i = 1;
while (i &lt; weapons_total)
{
i++
if (weapons_grid[i,3] == true)
last_weapon = i;
}

    if (currently_equipped_weapon == last_weapon)
    {
        var i=1;
        while (weapons_grid[i,3] == false &amp;&amp; i&lt;currently_equipped_weapon)
        {
            i++;
        }
        currently_equipped_weapon = i;
    }
    else
    {
        var i=currently_equipped_weapon+1;
        while (weapons_grid[i,3] == false &amp;&amp; i&lt;=weapons_total)
        {
        if (i&lt;weapons_total)
        i++;
        else
        {
        i = currently_equipped_weapon;
        break;
        }
        }
        currently_equipped_weapon = i;
    }
}


if (scroll_down)
{
    if (currently_equipped_weapon == 1)
    {
        var i=weapons_total;
        while (weapons_grid[i,3] == false &amp;&amp; i&gt;currently_equipped_weapon)
        {
            i--;
        }
        currently_equipped_weapon = i;
    }
    else
    {
        var i=currently_equipped_weapon-1;
        while (weapons_grid[i,3] == false &amp;&amp; i&gt;=1)
        {
        i--;
        }
    currently_equipped_weapon = i;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Draw Sprite
draw_sprite_ext(sprite_index,image_index,floor(x),floor(y),1,1,dir,c_white,1)

//splash when hit
bullet = instance_place(x,y,obj_bullet)
if (show_splash)
{
show_splash = false;
sprite = hit_sprite[irandom_range(0,array_length_1d(hit_sprite)-1)];
image = irandom_range(0,sprite_get_number(sprite)-1);
}
if (bullet &amp;&amp; bullet.creator != obj_player)
{
if (instance_exists(bullet))
with (bullet)
if (instance_exists(creator))
other.splash_dir = 180+creator.dir;
draw_sprite_ext(sprite,image,bullet.x,bullet.y,1,1,splash_dir,c_white,1); //needs fix for animation
}
if (bullet == noone)
show_splash = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
