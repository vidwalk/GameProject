<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_grunt_idle</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>obj_enemy</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Properties
dir = 0; //Initial direction
hp = 8; //health
currently_equipped_weapon = 3; //Equip default weapon
alert_range = 225; //alert rangewdds
engage_range = 150; // fire range
insanity_rate = 8; //insanity per second
insanity = 0; // initial insanity

alert_chase_timer = 4; //how long to chase
muzzle_flash = false;
spd = 3.8; //speed

//Possession vars
possessor = 0; //Current possessor

//fixes
fix_x = x; //x fix for possession
fix_y = y; //y fix for possession
splash_dir = 0; //splash dir when hit
show_splash = true; // splash show

//Dazed after possession
dazed_timer = 2.5;
dazed_timer_done = false;

//set default state
default_state = "idle";

//patrol coords
patrol_x1 = 0;
patrol_x2 = 0;
patrol_y1 = 0;
patrol_y2 = 0;
//patrol direction
patrol = 0;

//Pathfinder
path = 0; //pathfinding var
path = path_add(); //Add default path
roam_x1 = 0; //start point of patrol
roam_y1 = 0; //start point of patrol
roam_x2 = 0; //Goal point of patrol X
roam_y2 = 0; //Goal point of patrol Y

//Combat Functionality
distance = 0;
randomshot = 0;
target = 0;
can_fire_bullet = true;
firing_random_cooldown = 12;
vision = 0;
player_x = 0;
player_y = 0;

alert_chase_stop = false; //when to stop chasing

//Defaultness to idle
default_state = "idle";

patrol_x1 = x;
patrol_y1 = y;




</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///State Machine
state_machine_init();

//Define States
state_create("idle",scr_grunt_idle);
state_create("possessed",scr_grunt_possessed);
state_create("roam",scr_grunt_roam);   
state_create("dazed",scr_grunt_dazed); 
state_create("patrol",scr_grunt_patrol);
state_create("engaged",scr_grunt_engaged);
state_create("alert",scr_grunt_alert);
//Default State
state_init(default_state);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Weapons grid
weapons_total = 3;
//Weapons collumns
weapons_grid[0, 1] = "Name"; //name column
weapons_grid[0, 2] = "Ammo"; //ammo column
weapons_grid[0, 3] = "Available"; //collected column
weapons_grid[0, 4] = "Damage"; //damage column
weapons_grid[0, 5] = "Cooldown"; //weapon cooldown
weapons_grid[0, 6] = "Range"; //weapon range
weapons_grid[0, 7] = "Sound"; //weapon sound

//Names
weapons_grid[1,1] = "Devil Deagle";
weapons_grid[2,1] = "Devil Rifle";
weapons_grid[3,1] = "Machine Gun";
//Ammo
weapons_grid[1,2] = 0;
weapons_grid[2,2] = 0;
weapons_grid[3,2] = 45;
//Available
weapons_grid[1,3] = false;
weapons_grid[2,3] = false;
weapons_grid[3,3] = true;
//Damage
weapons_grid[1,4] = 3;
weapons_grid[2,4] = 1;
weapons_grid[3,4] = 1;
//Cooldown
weapons_grid[1,5] = 0.3;
weapons_grid[2,5] = 0.09;
weapons_grid[3,5] = 0.07;
//Range
weapons_grid[1,6] = 1000;
weapons_grid[2,6] = 1000;
weapons_grid[3,6] = 1000;
//Sound
weapons_grid[1,7] = snd_deagle_soul;
weapons_grid[2,7] = snd_rifle_auto;
weapons_grid[3,7] = snd_deagle_simple;
//Accuracy
weapons_grid[1,8] = 4;
weapons_grid[2,8] = 9;
weapons_grid[3,8] = 15;
//NoAmmo Sound
weapons_grid[1,9] = snd_deagle_noammo;
weapons_grid[2,9] = snd_rifle_noammo;
weapons_grid[3,9] = snd_machinegun_noammo;
//Bullet sprite
weapons_grid[1,10] = spr_deagle_bullet;
weapons_grid[2,10] = spr_rifle_bullet;
weapons_grid[3,10] = spr_machinegun_bullet;
//Muzzle Flash sprites
weapons_grid[1,12] = spr_flash_deagle;
weapons_grid[2,12] = spr_flash_deagle;
weapons_grid[3,12] = spr_flash_deagle;








</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Sounds
//Hit Sounds Array
hit_sound[0] = snd_bullet_impact_01;
hit_sound[1] = snd_bullet_impact_01;
//hit_sound[2] = snd_grunt_hit_03;
//hit_sound[3] = snd_grunt_hit_04;
//hit_sound[4] = snd_grunt_hit_05;
//hit_sound[5] = snd_grunt_hit_06;

//Footsteps array
tile_layers = 1;
footsteps_can_play = true;
footsteps_audio_cd = 0.5;
//Concrete
footsteps_array[0,0] = 1000000; 
footsteps_array[1,0] = snd_grunt_walk_01;
footsteps_array[2,0] = snd_grunt_walk_02;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Hit Sprites
sprite = 0;
hit_sprite[0] = spr_hit_blood_01;
hit_sprite[1] = spr_hit_blood_01;
hit_sprite[2] = spr_hit_blood_01;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (obj_player.possession_charges &lt; obj_player.possession_charges_max)
obj_player.possession_charges++;

//add death to scoreboard
with (obj_player)
if (!place_meeting(x,y,obj_scoreboard))
obj_scoreboard.killed_enemies++;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>alert_chase_stop = true;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>dazed_timer_done = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Enable firing again once cd is over
can_fire_bullet = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Update State
state_update();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//State Execute
state_execute();
//Lower insanity
if (insanity &gt; 0 &amp;&amp; state_name != "possessed")
insanity-=insanity_rate/room_speed;



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Draw Sprite
draw_sprite_ext(sprite_index,image_index,floor(x),floor(y),1,1,dir,c_white,1)
//draw hit animation

bullet = instance_place(x,y,obj_bullet)
if (show_splash)
{
show_splash = false;
sprite = hit_sprite[irandom_range(0,array_length_1d(hit_sprite)-1)];
image = irandom_range(0,sprite_get_number(sprite)-1);
}
if (bullet &amp;&amp; bullet.creator == obj_player &amp;&amp; obj_player_possess.currently_possessed_enemy!=id)
{
with (bullet)
other.splash_dir = shot_angle+180;
draw_sprite_ext(sprite,image,bullet.x,bullet.y,1,1,splash_dir,c_white,1); //needs fix for animation
}
if (bullet == noone)
show_splash = true;


//muzzle flash
if (state_name == "engaged" &amp;&amp; muzzle_flash == true)
{
muzzle_flash = false;
with (id)
draw_sprite_ext(weapons_grid[currently_equipped_weapon,12],irandom_range(0,sprite_get_number(weapons_grid[currently_equipped_weapon,12])),id.x+lengthdir_x(24,id.dir),id.y+lengthdir_y(24,id.dir),1,1,id.dir,c_white,1);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
